<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة التحكم - رصد المزرعة الذكي</title>

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>

    <header class="main-header">
        <div class="logo">SMART AGRI / GREEN MIND</div>
        <button class="menu-toggle" aria-controls="main-nav" aria-expanded="false">
            <span class="hamburger-icon"></span>
        </button>
        <nav id="main-nav">
            <ul>
                <li><a href="index.html">الرئيسية</a></li>
                <li><a href="about.html">من نحن</a></li>
                <li><a href="services.html">خدماتنا</a></li>
                <li><a href="contact.html">اتصل بنا</a></li>
                <li><a href="dashboard.html" class="active">لوحة التحكم</a></li>
                <li><a href="ai-assistant.html">المساعد الذكي</a></li>
            </ul>
        </nav>
    </header>

    <main class="dashboard-container">

        <section class="location-input-section manual-data-input">
            <h2><i class="fas fa-edit"></i> إدخال بيانات الرصد اليدوي والطقس</h2>

            <div class="input-grid">

                <div class="input-group">
                    <label for="lat-input">خط العرض (Latitude)</label>
                    <input type="text" id="lat-input" placeholder="مثال: 30.75" dir="ltr" required>
                </div>

                <div class="input-group">
                    <label for="lon-input">خط الطول (Longitude)</label>
                    <input type="text" id="lon-input" placeholder="مثال: 29.31" dir="ltr" required>
                </div>

                <div class="input-group">
                    <label for="date-input">تاريخ القراءة</label>
                    <input type="date" id="date-input" value="" required>
                </div>

                <div class="input-group">
                    <label for="ndvi-input">مؤشر NDVI اليدوي (0.00-1.00)</label>
                    <input type="number" id="ndvi-input" placeholder="مثال: 0.75" min="0" max="1" step="0.01" dir="ltr">
                </div>

                <div class="input-group">
                    <label for="moisture-input">نسبة الرطوبة اليدوية (%)</label>
                    <input type="number" id="moisture-input" placeholder="مثال: 65" min="0" max="100" step="1"
                        dir="ltr">
                </div>

                <div class="buttons-container horizontal-buttons">
                    <button id="save-data-button" class="cta-button primary-bg"><i class="fas fa-save"></i> حفظ</button>
                    <button id="fetch-weather-button" class="cta-button accent-bg"><i class="fas fa-cloud-sun"></i>
                        تحديث الطقس</button>
                    <button id="reset-data-button" class="cta-button danger-bg"><i class="fas fa-redo-alt"></i> إعادة
                        ضبط</button>
                </div>

            </div>

            <div id="location-status" class="status-message">أدخل الإحداثيات لحفظ القراءة وجلب الطقس.</div>
        </section>

        <div id="dashboard-content">
            <h1 class="section-title"><i class="fas fa-chart-line"></i> نظرة عامة على المزرعة الذكية</h1>

            <div class="kpi-grid">
                <div class="kpi-card status-ok">
                    <i class="fas fa-seedling"></i>
                    <h3>صحة المحصول (NDVI)</h3>
                    <p class="value" id="kpi-health">--</p>
                    <span class="status-indicator">آخر قراءة يدوية</span>
                </div>

                <div class="kpi-card status-warning">
                    <i class="fas fa-tint"></i>
                    <h3>الرطوبة المقدرة</h3>
                    <p class="value" id="kpi-moisture">--</p>
                    <span class="status-indicator">آخر قراءة يدوية</span>
                </div>

                <div class="kpi-card success-bg">
                    <i class="fas fa-cloud-sun"></i>
                    <h3>التوقع الحراري (اليوم)</h3>
                    <p class="value" id="kpi-weather-temp">--</p>
                    <span class="status-indicator">بيانات OpenWeather</span>
                </div>

                <div class="kpi-card info-bg">
                    <i class="fas fa-wind"></i>
                    <h3>سرعة واتجاه الرياح</h3>
                    <p class="value" id="kpi-wind">--</p>
                    <span class="status-indicator">بيانات OpenWeather</span>
                </div>
            </div>

            <div class="monitoring-grid">

                <!-- مفكك: عرض تفاصيل الطقس في 3 بطاقات صغيرة تشبه KPI -->
                <div class="kpi-card small-card">
                    <i class="fas fa-temperature-high"></i>
                    <h3>الطقس الحالي</h3>
                    <p class="value" id="current-temp-val">--</p>
                    <div class="status-indicator" style="margin-top:8px; font-size:0.95rem; color:#666;"> <span
                            id="weather-description">--</span><br><small id="min-max-temp-val">-- / --</small></div>
                </div>

                <div class="kpi-card small-card">
                    <i class="fas fa-water"></i>
                    <h3>الرطوبة وساعات النهار</h3>
                    <p class="value" id="humidity-val">--</p>
                    <div class="status-indicator" style="margin-top:8px; font-size:0.95rem; color:#666;">
                        <p>ساعات النهار: <strong id="day-length">--</strong></p>
                        <p>ساعات الليل: <strong id="night-length">--</strong></p>
                    </div>
                </div>

                <div class="kpi-card small-card">
                    <i class="fas fa-wind"></i>
                    <h3>الرياح والغيوم</h3>
                    <p class="value" id="wind-speed-val">--</p>
                    <div class="status-indicator" style="margin-top:8px; font-size:0.95rem; color:#666;">
                        <p>الاتجاه: <strong id="wind-dir-val">--</strong></p>
                        <p>الغيوم: <strong id="clouds-val">--</strong></p>
                    </div>
                </div>

                <div class="chart-card">
                    <h2>مؤشر صحة المحصول (NDVI) - سجل القياسات</h2>
                    <canvas id="ndviChart"></canvas>
                </div>

                <div class="chart-card">
                    <h2>نسبة الرطوبة (%) - سجل القياسات</h2>
                    <canvas id="moistureChart"></canvas>
                </div>

                <div class="chart-card full-span-chart">
                    <h2>التوقعات البيئية للأسبوع القادم (سحب، UV، ضوء)</h2>
                    <canvas id="weatherDetailsChart"></canvas>
                </div>

                <div class="info-card alerts">
                    <h2><i class="fas fa-exclamation-triangle"></i> التنبيهات والتوصيات (الطقس والرصد)</h2>
                    <ul id="alert-list">
                        <li>يتم تحديث التوصيات...</li>
                    </ul>
                </div>

                <div class="info-card irrigation-status">
                    <h2>تقرير الطقس وتوصيات الري</h2>
                    <div class="status-detail">
                        <p id="suggested-action">اضغط على "تحديث الطقس" للحصول على توصيات أسبوعية.</p>
                        <p>تاريخ آخر تحديث: <strong id="last-analysis">--</strong></p>
                    </div>
                </div>

                <div class="info-card special-cta-box">
                    <h2>تحليل مخصص لمزرعتك</h2>
                    <p class="cta-message">كلمنا لو عايز تعرف معلومات أكتر وأدق معموله مخصوص ليك ولمزرعتك.</p>
                    <a href="contact.html" class="cta-button primary-bg">تواصل معنا الآن</a>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 SMART AGRI. جميع الحقوق محفوظة.</p>
        <p class="motivational-text">هذا الموقع مازال قيد التطوير المستمر ليكون مستقبلاً أكبر وأكثر ذكاءً.</p>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/dashboard.js"></script>
</body>

</html>